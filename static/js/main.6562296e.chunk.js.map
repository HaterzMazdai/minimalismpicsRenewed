{"version":3,"sources":["Header/Search/SearchComponent.jsx","Header/HeaderComponent.jsx","Header/index.js","actions/index.js","Home/Post/PostComponent.jsx","Home/ScrollButton/ScrollButtonComponent.jsx","Home/HomeComponent.jsx","Home/index.js","App.js","reducers/searchReducer.js","index.js","Home/index.module.scss","Home/Post/index.module.scss","Header/index.module.scss","Header/Search/index.module.scss","Home/ScrollButton/index.module.scss"],"names":["SearchComponent","props","useState","value","setValue","className","styles","input","onPressEnter","ev","onChange","console","log","target","allowClear","placeholder","suffix","SearchOutlined","onClick","HeaderComponent","header","onSearch","delay","Header","connect","dispatch","type","handleSearch","PostComponent","isModal","setModal","post","useEffect","thumb","Image","regular","src","urls","key","id","index","visible","postModal","centered","width","closable","onCancel","footer","postModal__container","stopPropagation","postModal__img","ScrollButtonComponent","icon","window","scrollTo","top","behavior","HomeComponent","reduxState","useSelector","state","unsplash","Unsplash","accessKey","isLoaded","setLoaded","isUpdating","setUpdating","page","setPage","isScrollTopVisible","setScrollTopVisible","posts","horizontal","vertical","score","firstColumn","setFirstColumn","secondColumn","setSecondColumn","thirdColumn","setThirdColumn","searchValue","args","a","then","res","ok","json","Error","data","array","results","firstScore","firstArr","secondScore","secondArr","thirdScore","thirdArr","forEach","height","push","catch","e","message","error","load","root","document","getElementsByTagName","isVisible","addEventListener","scrollTop","clientHeight","scrollHeight","removeEventListener","main","column","map","column__center","Home","App","searchReducer","action","store","createStore","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.6562296e.chunk.js","sourcesContent":["import React, {useState} from 'react'\nimport styles from './index.module.scss'\nimport {Input} from 'antd'\nimport {\n  SearchOutlined\n} from '@ant-design/icons';\n\nconst SearchComponent = props => {\n\n\tconst [value, setValue] = useState('')\n\n\n\t// const initiateTimer = (func, delay, arg) => {\n\t// \tif (timerId) {\n\t// \t\tclearTimeout(timerId)\n\t// \t}\n\t// \tsetTimerId(setTimeout(func, delay, arg))\n\t// }\n\n\treturn (\n\t\t<Input\n\t\tclassName={styles.input}\n\t\tonPressEnter={ev => {\n\t\t\tprops.onChange(value)\n\t\t\tconsole.log(1231231)\n\t\t}}\n\t\tonChange={ev => {\n\t\t\tsetValue(ev.target.value)\n\t\t}}\n\t\tallowClear\n\t\tplaceholder=\"Поиск по слову\"\n\t\tsuffix={\n\t\t\t<SearchOutlined \n\t\t\tonClick={ev => {\n\t\t\t\tprops.onChange(value)\n\t\t\t}} />\n\t\t}\n\t\t/>\n\t)\n}\n\nexport default SearchComponent ","import React from 'react'\nimport styles from './index.module.scss'\nimport SearchComponent from './Search/SearchComponent' \nimport { message } from 'antd';\n\n\n\nconst HeaderComponent = props => {\n\n    return (\n        <header className={styles.header} >\n            <div>\n                minimalispics.\n            </div>\n            <SearchComponent\n            onChange={value => {\n                props.onSearch(value)\n            }}\n            delay={1000}\n            />\n        </header>\n    )\n}\n\nexport default HeaderComponent","import { connect } from 'react-redux'\nimport { handleSearch } from '../actions/index'\nimport HeaderComponent from './HeaderComponent'\n\nconst mapDispatchToProps = (dispatch) => ({\n\tonSearch: value => dispatch(handleSearch(value)) \n})\n\nconst Header = connect(null, mapDispatchToProps)(HeaderComponent)\n\nexport default Header","export const handleSearch = value => ({\n\ttype: \"HANDLE_SEARCH\",\n\tvalue\n})","import React, {useState, useEffect} from 'react'\nimport styles from './index.module.scss'\nimport './override.scss'\nimport {Modal} from 'antd'\n\nconst PostComponent = props => {\n\n  const [isModal, setModal] = useState(false);\n\n  const post = props.post;\n\n\n \n\n  useEffect(() => {\n    const thumb = new Image()\n    const regular = new Image()\n    thumb.src = post.urls.thumb\n    regular.src = post.urls.regular\n  }, [])\n\n  return (\n    <>\n        <img key={post.id + props.index} src={post.urls.thumb} className={styles.post} \n        onClick={() => {          \n            setModal(true)\n        }}\n        />\n        <Modal\n        visible={isModal}\n        className={styles.postModal + ' ' + 'modal'}\n        centered\n        width={820}\n        closable={false}      \n        onCancel={() => {\n          setModal(false)\n        }}\n        footer={false}\n        >\n          <div\n          onClick={() => {\n            setModal(false)\n          }}\n          className={styles.postModal__container} >\n            <img\n            onClick={ev => {\n              ev.stopPropagation()\n              console.log(props.post)\n            }}\n            key={post.id + props.index} src={post.urls.regular} className={styles.postModal__img }/>\n          </div>\n        </Modal>\n      </>\n  )\n}\n\n\nexport default PostComponent","import React from 'react';\nimport styles from './index.module.scss'\n\n\nconst ScrollButtonComponent = props => {\n\n\n\n    return (\n        <div\n        className={styles.icon}\n        onClick={() => {\n            window.scrollTo({\n                top: 0,\n                behavior: 'smooth'\n            })\n        }}\n        />\n    )\n}\n\nexport default ScrollButtonComponent","import { message } from 'antd';\nimport React, { useState, useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport Unsplash, { toJson } from 'unsplash-js';\nimport styles from './index.module.scss'\nimport PostComponent from './Post/PostComponent'\nimport ScrollButtonComponent from './ScrollButton/ScrollButtonComponent'\n\n\nconst HomeComponent = props => {\n  \n  const reduxState = useSelector(state => state)\n\n  const unsplash = new Unsplash({ accessKey: 'LuPHM_pd_YAH00c9ssorJV5fYEc0rvK9X0ST1oIFV_s' });\n\n  const [isLoaded, setLoaded] = useState(false)\n\n  const [isUpdating, setUpdating] = useState(false)\n\n  const [page, setPage] = useState(1)\n\n  const [isScrollTopVisible, setScrollTopVisible] = useState(false)\n\n  const [firstColumn, setFirstColumn] = useState({\n    posts: [],\n    horizontal: 0,\n    vertical: 0,\n    score: 0\n  })\n\n  const [secondColumn, setSecondColumn] = useState({\n    posts: [],\n    horizontal: 0,\n    vertical: 0,\n    score: 0\n  })\n\n  const [thirdColumn, setThirdColumn] = useState({\n    posts: [],\n    horizontal: 0,\n    vertical: 0,\n    score: 0\n  })\n\n  useEffect(() => {\n\n    const searchValue = reduxState\n\n    const args = searchValue \n      ? [searchValue, page, 30, 'latest']\n      : [page, 30, 'lates']\n\n    const load = async () => {\n      unsplash[searchValue ? 'search' : 'photos'][searchValue ? 'photos' : 'listPhotos'](...args).then(res => {\n        console.log(res)\n        if (res.ok) {\n          return res.json()\n        } else {\n          throw new Error('Ошибка запроса')\n        }\n        \n      }).then(data => {\n        console.log(data, '3123123')\n        const array = searchValue ? data.results : data;\n \n        let firstScore = firstColumn.score ? firstColumn.score : 0 \n        let firstArr = firstColumn.posts ? firstColumn.posts : []\n\n        let secondScore = secondColumn.score ? secondColumn.score : 0 \n        let secondArr = secondColumn.posts ? secondColumn.posts : []\n        \n        let thirdScore = thirdColumn.score ? thirdColumn.score : 0 \n        let thirdArr = thirdColumn.posts ? thirdColumn.posts : []\n\n        \n\n        array.forEach(post => {\n          if (firstScore < thirdScore && firstScore < secondScore || firstScore === thirdScore || firstScore === secondScore) {\n            firstScore = firstScore + post.height/post.width\n            firstArr.push(post)\n          } else if (secondScore < firstScore && secondScore < thirdScore || firstScore === thirdScore || firstScore === secondScore) {\n            secondScore = secondScore + post.height/post.width\n            secondArr.push(post)\n          } else {\n            thirdScore = thirdScore + post.height/post.width\n            thirdArr.push(post)\n          }\n        })\n\n        setFirstColumn({\n          posts: firstArr,\n          score: firstScore\n        })\n\n        setSecondColumn({\n          posts: secondArr,\n          score: secondScore\n        })\n\n        setThirdColumn({\n          posts: thirdArr,\n          score: thirdScore\n        })\n        \n        setPage(page + 1)\n\n        if (!isLoaded){\n          setLoaded(true)\n        }\n        if (isUpdating) {\n          setUpdating(false)\n        }\n      }).catch(e => {\n        message.error('Что-то пошло не так')\n        console.error(e)\n      }) \n    }\n\n    if (!isLoaded || isUpdating) {\n      load()\n    }\n  }, [isLoaded, isUpdating])\n\n  useEffect(() => {\n    setFirstColumn({\n      posts: [],      \n      score: 0\n    })\n\n    setSecondColumn({\n      posts: [],      \n      score: 0\n    })\n\n    setThirdColumn({\n      posts: [],\n      score: 0\n    })\n\n    setPage(1)\n\n    setLoaded(false)\n  }, [reduxState])\n\n\n  useEffect(() => {\n    const root = window.document.getElementsByTagName('html')[0]\n    let isVisible = false\n\n    window.addEventListener('scroll', () => {\n\n      if (root.scrollTop + root.clientHeight >= root.scrollHeight - 800) {\n        setUpdating(true)\n      }\n      \n      if (root.scrollTop >= 100 && !isVisible) {\n        setScrollTopVisible(true)\n        isVisible = true\n      } else if (root.scrollTop < 100 && isVisible) {\n        setScrollTopVisible(false)\n        isVisible = false\n      }\n    })\n\n  return () => {\n    window.removeEventListener('scroll')\n  }\n  }, [])\n\n  return (\n    <> \n      {isScrollTopVisible ? (\n        <ScrollButtonComponent/>\n      ) : \"\"}\n      {isLoaded ? (\n        <div className={styles.main} >\n          <div\n            className={styles.column}\n          >\n            {firstColumn.posts.map((post, index) => {\n              return (\n                <PostComponent post={post} index={index} key={post.id + index}  />\n              )\n            })}\n          </div>\n          <div\n            className={styles.column__center}\n          >\n            {secondColumn.posts.map((post, index) => {\n              return (\n                <PostComponent post={post} index={index} key={post.id + index}  />\n              )\n            })}\n          </div>\n          <div\n            className={styles.column}\n          >\n            {thirdColumn.posts.map((post, index) => {\n              return (\n                <PostComponent post={post} index={index}  key={post.id + index} />\n              )\n            })}\n          </div>\n        </div>\n      ) : (\n          \"\"\n        )}\n    </>\n  )\n}\n\n\nexport default HomeComponent","import {connect} from 'react-redux'\nimport HomeComponent from './HomeComponent'\n\nconst Home = connect()(HomeComponent)\n\nexport default Home","import React from 'react';\nimport './App.scss';\nimport Header from './Header'\nimport Home from './Home'\n\nconst App = () => {\n\n  return (\n    <>\n      <Header/>\n      <Home/>\n    </>\n  );\n}\n\nexport default App;\n","const searchReducer = (state, action) => {\n\tswitch(action.type) {\n\t\tcase 'HANDLE_SEARCH':\n\t\t\treturn action.value\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\n\n\nexport default searchReducer","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport searchReducer from './reducers/searchReducer'\n\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\n\n\nconst store = createStore(searchReducer, '')\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Home_main__1pRfO\",\"column\":\"Home_column__XRaU9\",\"column__center\":\"Home_column__center__3pqzq\",\"item\":\"Home_item__3mMC_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"Post_post__1DL5P\",\"postModal\":\"Post_postModal__2M_0z\",\"postModal__container\":\"Post_postModal__container__1qxVd\",\"postModal__img\":\"Post_postModal__img__2Iu0k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__257pi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Search_input__2Nj7D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"ScrollButton_icon__24axN\"};"],"sourceRoot":""}