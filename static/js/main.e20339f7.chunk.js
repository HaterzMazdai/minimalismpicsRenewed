(this.webpackJsonpminimalismpics_renewed=this.webpackJsonpminimalismpics_renewed||[]).push([[0],{107:function(e,t,n){e.exports={icon:"ScrollButton_icon__24axN"}},117:function(e,t,n){e.exports=n(187)},122:function(e,t,n){},170:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(7),r=n.n(o),s=(n(122),n(36)),i=n(18),l=n(87),u=n.n(l),m=n(88),p=n.n(m),f=n(190),d=n(192),_=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),o=n[0],r=n[1];return c.a.createElement(f.a,{className:p.a.input,onPressEnter:function(t){e.onChange(o)},onChange:function(e){r(e.target.value)},allowClear:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043b\u043e\u0432\u0443",suffix:c.a.createElement(d.a,{onClick:function(t){e.onChange(o)}})})},h=n(9),E=function(e){var t=Object(h.e)(),n=Object(a.useState)("/minimalismpicsRenewed/"===t.location.pathname),o=Object(i.a)(n,2),r=o[0],s=o[1];return c.a.createElement("header",{className:u.a.header},c.a.createElement("div",{onClick:function(){t.push(r?"/auth":""),s(!r)}},"minimalispics."),r&&c.a.createElement(_,{onChange:function(t){e.onSearch(t)},delay:1e3}))},b=Object(s.b)(null,(function(e){return{onSearch:function(t){return e(function(e){return{type:"HANDLE_SEARCH",value:e}}(t))}}}))(E),j=n(72),O=n.n(j),w=n(98),v=n(191),g=n(99),k=n.n(g),S=n(55),x=n.n(S),C=n(56),N=n.n(C),y=(n(170),n(189)),H=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),o=n[0],r=n[1],s=e.post;return Object(a.useEffect)((function(){window.innerWidth<=960||((new Image).src=s.urls.regular)}),[s.urls.regular]),c.a.createElement(c.a.Fragment,null,c.a.createElement("img",{alt:"",key:s.id+e.index,src:s.urls.thumb,className:N.a.post,onClick:function(){r(!0)}}),c.a.createElement(y.a,{visible:o,className:"".concat(N.a.postModal," post"),centered:!0,width:820,closable:!1,onCancel:function(){r(!1)},footer:!1},c.a.createElement("div",{onClick:function(){r(!1)},className:N.a.postModal__container},c.a.createElement("img",{alt:"",onClick:function(e){e.stopPropagation()},key:s.id+e.index,src:s.urls.regular,className:N.a.postModal__img}))))},M=n(107),P=n.n(M),R=function(e){return c.a.createElement("div",{className:P.a.icon,onClick:function(){window.scrollTo({top:0,behavior:"smooth"})}})},L=function(e){var t=Object(s.c)((function(e){return e})),n=new k.a({accessKey:"LuPHM_pd_YAH00c9ssorJV5fYEc0rvK9X0ST1oIFV_s",secret:"dt3IVL8Qv1F-V8J8IZqoYcqQCil1FTkBp0cjBqakaVY",callbackUrl:"https://haterzmazdai.github.io/minimalismpicsRenewed/auth"}),o=Object(a.useState)(!1),r=Object(i.a)(o,2),l=r[0],u=r[1],m=Object(a.useState)(!1),p=Object(i.a)(m,2),f=p[0],d=p[1],_=Object(a.useState)(1),h=Object(i.a)(_,2),E=h[0],b=h[1],j=Object(a.useState)(!1),g=Object(i.a)(j,2),S=g[0],C=g[1],N=Object(a.useState)({posts:[],score:0}),y=Object(i.a)(N,2),M=y[0],P=y[1],L=Object(a.useState)({posts:[],score:0}),T=Object(i.a)(L,2),q=T[0],I=T[1],V=Object(a.useState)({posts:[],score:0}),A=Object(i.a)(V,2),B=A[0],F=A[1];return Object(a.useEffect)((function(){var e=t,a=e?[e,E,30,"latest"]:[E,30,"lates"];l&&!f||function(){var t=Object(w.a)(O.a.mark((function t(){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(c=n[e?"search":"photos"])[e?"photos":"listPhotos"].apply(c,a).then((function(e){if(e.ok)return e.json();throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430")})).then((function(t){var n=e?t.results:t,a=M.score||0,c=M.posts||[],o=q.score||0,r=q.posts||[],s=B.score||0,i=B.posts||[];n.forEach((function(e){a<s&&a<o||a===s||a===o?(a+=e.height/e.width,c.push(e)):o<a&&o<s||a===s||a===o?(o+=e.height/e.width,r.push(e)):(s+=e.height/e.width,i.push(e))})),P({posts:c,score:a}),I({posts:r,score:o}),F({posts:i,score:s}),b(E+1),l||u(!0),f&&d(!1)})).catch((function(e){v.b.error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"),console.error(e)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[l,f]),Object(a.useEffect)((function(){P({posts:[],score:0}),I({posts:[],score:0}),F({posts:[],score:0}),b(1),u(!1)}),[t]),Object(a.useEffect)((function(){var e=window.document.getElementsByTagName("html")[0],t=!1,n=function(){e.scrollTop+e.clientHeight>=e.scrollHeight-800&&d(!0),e.scrollTop>=100&&!t?(C(!0),t=!0):e.scrollTop<100&&t&&(C(!1),t=!1)};return window.addEventListener("scroll",n),function(){window.removeEventListener("scroll",n)}}),[]),c.a.createElement(c.a.Fragment,null,S?c.a.createElement(R,null):"",l?c.a.createElement("div",{className:x.a.main},c.a.createElement("div",{className:x.a.column},M.posts.map((function(e,t){return c.a.createElement(H,{post:e,index:t,key:e.id+t})}))),c.a.createElement("div",{className:x.a.column__center},q.posts.map((function(e,t){return c.a.createElement(H,{post:e,index:t,key:e.id+t})}))),c.a.createElement("div",{className:x.a.column},B.posts.map((function(e,t){return c.a.createElement(H,{post:e,index:t,key:e.id+t})})))):"")},T=Object(s.b)()(L),q=function(){return c.a.createElement("div",null,"\u041f\u0435\u0440\u0435\u0430\u0434\u0440\u0435\u0441\u0430\u0446\u0438\u044f...")},I=n(68),V=function(){return c.a.createElement(I.a,null,c.a.createElement(b,null),c.a.createElement(h.a,{exact:!0,path:"/minimalismpicsRenewed/"},c.a.createElement(T,null)),c.a.createElement(h.a,{path:"/minimalismpicsRenewed/auth"},c.a.createElement(q,null)))},A=function(e,t){switch(t.type){case"HANDLE_SEARCH":return t.value;default:return e}},B=n(57),F=Object(B.b)(A,"");r.a.render(c.a.createElement(s.a,{store:F},c.a.createElement(V,null)),document.getElementById("root"))},55:function(e,t,n){e.exports={main:"Home_main__1pRfO",column:"Home_column__XRaU9",column__center:"Home_column__center__3pqzq",item:"Home_item__3mMC_"}},56:function(e,t,n){e.exports={post:"Post_post__1DL5P",postModal:"Post_postModal__2M_0z",postModal__container:"Post_postModal__container__1qxVd",postModal__img:"Post_postModal__img__2Iu0k"}},87:function(e,t,n){e.exports={header:"Header_header__257pi"}},88:function(e,t,n){e.exports={input:"Search_input__2Nj7D"}}},[[117,1,2]]]);
//# sourceMappingURL=main.e20339f7.chunk.js.map